{#{% form_theme form 'bootstrap_4_layout.html.twig' %}#}
{#{% form_theme form 'bootstrap_4_horizontal_layout.html.twig' %}#}
{% extends 'layout_admin.html.twig' %}

{% block title %}
    Start import, step3 :: admin
{% endblock %}

{% block breadcrumbs %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="{{ path('backend_dashboard') }}"><i class="fa fa-dashboard"></i>  Dashboard</a>
        </li>
        <li class="breadcrumb-item">
            <a href="{{ path('backend_import_index') }}"><i class="fa fa-table"></i>  Imports</a>
        </li>
        <li class="breadcrumb-item">
            <span><i class="fa fa-pencil"></i> Import YML / Map Vendors</span>
        </li>
    </ol>
{% endblock %}

{% block body %}
    <style>
        .table-responsive{
            height: 500px;
            overflow: scroll;
        }
        thead tr:nth-child(1) th{
            color: #fff;
            background-color: #343a40;
            position: sticky;
            top: 0;
            z-index: 10;
        }
    </style>

    <h3>Import / step4 / view import results ({{ importLog.note }})
        <a class="btn btn-secondary" href="{{ path('backend_import_step3', {'id': importLog.id}) }}">
            <i class="fa fa-arrow-left"></i> Back to step3</a>
        <a class="btn btn-success" href="{{ path('backend_offer_set_filter', { import: importLog.id }) }}">
            <i class="fa fa-list"></i> Редактировать офферы</a>
    </h3>
    <hr />

    {% include 'admin/flashes.html.twig' %}

    <div class="table-responsive">

        <form method="post" action="{{ path('backend_import_yml_step5', {'id': row.id}) }}">
            <h2>Map Vendors</h2>
            <table class="table table-striped table-bordered">
                {% for id, vendor in ymlVendors %}
                    {% set found = false %}
                    <tr>
                        <td>{{ id }}</td>
                        <td>({{ vendor.country_name }}{{ vendor.region_name }}) {{ vendor.name | raw }}</td>
                        <td><select name="vendor[{{ id }}]" id="vendor_{{ id }}">
                                <option value="">---</option>
                                {% for v_id, v_name in inDbVendors %}
                                    {% if vendor.name == v_name %}
                                        {% set found = true %}
                                    {% endif %}
                                    <option value="{{ v_id }}"{{ vendor.name == v_name ? ' selected' : '' }}>{{ v_name }}</option>
                                {% endfor %}
                            </select>
                            {% if found == false %}
                                <input type="checkbox" class="new-vendor" name="newVendor[{{ id }}]" id="new_vendor_{{ id }}">
                                <label for="new_vendor_{{ id }}">add this</label>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                <tfoot>
                <tr>
                    <td></td>
                    <td></td>
                    <td><input type="checkbox" id="checkAllNewVendors"><label
                                for="checkAllNewVendors"> check all</label></td>
                </tr>
                </tfoot>
            </table>

        </form>
    </div>

    <br />

{% endblock %}
